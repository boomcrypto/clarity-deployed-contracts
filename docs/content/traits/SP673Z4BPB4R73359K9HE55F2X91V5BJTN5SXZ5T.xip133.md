---
title: "Trait xip133"
draft: true
---
```
;; SPDX-License-Identifier: BUSL-1.1

(impl-trait 'SP2XD7417HGPRTREMKF748VNEQPDRR0RMANB7X1NK.proposal-trait.proposal-trait)

(use-trait ft-trait 'SP2XD7417HGPRTREMKF748VNEQPDRR0RMANB7X1NK.trait-sip-010.sip-010-trait)

(define-constant err-unauthorised (err u1000))
(define-constant err-paused (err u1001))
(define-constant err-peg-in-address-not-found (err u1002))
(define-constant err-invalid-amount (err u1003))
(define-constant err-invalid-tx (err u1004))
(define-constant err-already-sent (err u1005))
(define-constant err-bitcoin-tx-not-mined (err u1011))
(define-constant err-invalid-input (err u1012))
(define-constant err-token-mismatch (err u1015))
(define-constant err-slippage (err u1016))
(define-constant err-not-in-whitelist (err u1017))
(define-constant err-invalid-routing (err u1018))
(define-constant err-commit-tx-mismatch (err u1019))
(define-constant err-invalid-token (err u1020))

(define-constant MAX_UINT u240282366920938463463374607431768211455)
(define-constant ONE_8 u100000000)

(define-constant TOKEN_TO_REFUND 'SP673Z4BPB4R73359K9HE55F2X91V5BJTN5SXZ5T.runes-mineticket)
(define-constant TOKEN_AMOUNT u59702300000000)
(define-constant REFUND_PER_TOKEN u20)
(define-constant START_BURN_BLOCK burn-block-height)
(define-constant END_BURN_BLOCK u893377)

(define-public (execute (sender principal))
	(begin			
(try! (contract-call? .meta-peg-in-v2-06-refund transfer-all-to tx-sender 'SP2XD7417HGPRTREMKF748VNEQPDRR0RMANB7X1NK.token-abtc))
(try! (contract-call? 'SP2XD7417HGPRTREMKF748VNEQPDRR0RMANB7X1NK.executor-dao set-extensions (list
{ extension: .meta-peg-in-v2-06-refund, enabled: false }
{ extension: .meta-peg-in-v2-06a-refund, enabled: true })))

(try! (contract-call? .meta-peg-in-v2-06-refund pause true))
(try! (contract-call? .meta-peg-in-v2-06a-refund set-refund-per-token TOKEN_TO_REFUND TOKEN_AMOUNT REFUND_PER_TOKEN START_BURN_BLOCK END_BURN_BLOCK))
(try! (contract-call? .meta-peg-in-v2-06a-refund pause false))
(try! (contract-call? 'SP2XD7417HGPRTREMKF748VNEQPDRR0RMANB7X1NK.oracle-v2-01 approve-relayer .meta-peg-in-v2-06-refund false))
(try! (contract-call? 'SP2XD7417HGPRTREMKF748VNEQPDRR0RMANB7X1NK.oracle-v2-01 approve-relayer .meta-peg-in-v2-06a-refund true))

(try! (contract-call? .meta-peg-in-v2-06a-refund finalize-peg-in-refund-on-index 
  (tuple (amt u14705) (bitcoin-tx 0x02000000000106815ab2c637aa7fd4c7699fbba48ceafa976a70bbbae35002e45a420013e2dc120200000000ffffffff879827312e230a632e6aac75f20cc92418faeecdd95c56205fbe5962370e8c3b0400000000ffffffff879827312e230a632e6aac75f20cc92418faeecdd95c56205fbe5962370e8c3b0300000000ffffffff879827312e230a632e6aac75f20cc92418faeecdd95c56205fbe5962370e8c3b0200000000ffffffff879827312e230a632e6aac75f20cc92418faeecdd95c56205fbe5962370e8c3b0100000000ffffffffe889108ac02d2e8b8eb0594514bfb6578096c91a3bbfc7e58a62494f2ced9e080200000000ffffffff0522020000000000002251203957a16684e58e466abc51def45d4ba2ec2ad5e0a01abc83863dc7fa0b5e8b923e060000000000002251203f437983f2f843fd166414b867993bfe6ee8102ae2ac772b07ae3e4b904d3ece2202000000000000225120f77236aa6941bdc14944fb63b74084647f8986664ff01d28a0f09c10fac853c378ab0000000000002251203957a16684e58e466abc51def45d4ba2ec2ad5e0a01abc83863dc7fa0b5e8b920000000000000000106a5d0d0200160000ece635b002f1720201402e4e1f3d0ac5dac96620a5ccda68f891d9d5546531044bfab8325ad196ce7485c9000586e3be454141444cbd84b59b246ff7e9c804a1dfbb4c3b24b7f5b60154014023ea65e7186c86fd62ad6e5e6417f16547a55c23c0a3c40d494b2d4b8b062ad544fc3f81614cf4e69ce492bdf3fe545dfd5961586ac7d6e41dd3d3a9c25c4b330140e640abcb6d7073f19bf6c0364ba5ed37db17e6f3ecde577f14a6ecbeed4bc3a4e59d3ab65ae1bdcdec88bb2c458b18556de79c2b5513e1d6c81d5367aa66817d0140227687153416215b1d956cad0f2d7a628f8c46d2d6b9f24bd0755249f4b19ebaa54d6fac746cce2798882e9e7712d879aa287f2a3e1cfb16cb83548adc96490601400c73923a134791edf4f447284832c2b76d935cbe87dad7a29d7740bc32e817721fc49df21378999e62667b8a883a11c8fcb4afd3fa82eaefe3238752b5aab72a0140cb964b944dbd39eab7660ca9ea18def07b132c60038e6b41d48f557e9cab9ba8b40bf54800fe52a4bd55f660dfc1f90870d71db129fa0c893ad002508e8595e500000000) (decimals u0) (from 0x) (from-bal u0) (output u2) (tick u"runes::881516:304") (to 0x5120f77236aa6941bdc14944fb63b74084647f8986664ff01d28a0f09c10fac853c3) (to-bal u0))
  (tuple (header 0x00805f27dc57cd02bd3efa04395bd2f53c40944814227464c40102000000000000000000f49240fed655066a99c55657f21fd147a3049c734c4b7a5c3fe24a20c13c2f0573e2de678182021728d293ab) (height u888932))
  (tuple (hashes (list 0xef4eb9e1c5076a68b8f503aa95bd7bbe488d3e383d822310fadfa3ec3e1faa0f 0x444010feb4e890881a08709bd9d3282bf453e0a802e9d01879a596ad13446483 0xf9c5c9e7a9a462b312d336d158af57216cafc77dfa6f242892bcbe8acad8804e 0x3e2c585f6f9c156d7c70ae751673cbab41c1102b0ebc5476ed9b50de1d688a16 0x58f1a6987dea1ff4eebeaa072134d7210662752091d0be8bcf91a42011b3750c 0x4e69896f8ad13e0466a29b8e5da9e502fbaee14330044387b3aef01eb8ccb2bd 0xb0775048181c846513688882340885ab4611bfe25e1189c0b21f59fe17ba226c 0xa9bbebabbd25dc9cfa126929500ec42392998a9037d70639caed9dbac0cd5408 0xd55cbcfe0c4b174300428a927c2e463f6db33af235a7c06c0429de63d766b5a7 0x5713c780bdb931eee8aab2f7fe7efe4540acbbda3a57849479f7117b3b03ad15 0xf9723f97d3383415d397d3e4b8e36780956d5b49400ecd73bcf5ab233e53614e 0x77159b2963845d770eb1521867d8247e2b4a8f52a19d96fbfb3ca2b528697396 0x8d5e711463d002bb1cf485f574042c5840cbdd57dbc1fcd61efbf553dd8a95f1)) (tree-depth u13) (tx-index u626))
  (list (tuple (signature 0xd7acdbf73d6b6c85c7d0304361f935dbafe2fc6e685b02826a572e68f7cb66f86edbe67d34c5dfbb86887690b6d4ad2cc246b4f9554e41cb1adefede02784b4101) (signer 'SP3TJ5YF08D4FSHM9ZYBBG3X76PW9257YE9SPFWA1) (tx-hash 0xcd3fdb62ea185ad8098d34b53a0027f7119a5d799d93c60eedc63467c5cf11a5)))
  (tuple (order-idx u0) (tx 0x02000000000101d2574f28b74c5f96958f679c179122a6790d3b281846b7269645252d5677471e0100000000ffffffff014a01000000000000225120f77236aa6941bdc14944fb63b74084647f8986664ff01d28a0f09c10fac853c303404f0ca61a4b00124ed1ee7fbcbafde26db17e8c9f2be096eee7b78e74a1b5df7f7a696306cc7db1c8e3538d08a9683bf4cc024e5e457fb5833d38a09aa75e7dba7c4c570c000000020166020000002251203957a16684e58e466abc51def45d4ba2ec2ad5e0a01abc83863dc7fa0b5e8b920172020000002251203957a16684e58e466abc51def45d4ba2ec2ad5e0a01abc83863dc7fa0b5e8b92752070faf88fa6105c7bbd6f0cabe2e03a778ada80f8291699a8803574cc935946e7ac21c150929b74c1a04954b78b4b6035e97a5e078a5a0f28ec96d547bfee9ace803ac000000000))
  (tuple (header 0x00805f27dc57cd02bd3efa04395bd2f53c40944814227464c40102000000000000000000f49240fed655066a99c55657f21fd147a3049c734c4b7a5c3fe24a20c13c2f0573e2de678182021728d293ab) (height u888932))
  (tuple (hashes (list 0xd2574f28b74c5f96958f679c179122a6790d3b281846b7269645252d5677471e 0x444010feb4e890881a08709bd9d3282bf453e0a802e9d01879a596ad13446483 0xf9c5c9e7a9a462b312d336d158af57216cafc77dfa6f242892bcbe8acad8804e 0x3e2c585f6f9c156d7c70ae751673cbab41c1102b0ebc5476ed9b50de1d688a16 0x58f1a6987dea1ff4eebeaa072134d7210662752091d0be8bcf91a42011b3750c 0x4e69896f8ad13e0466a29b8e5da9e502fbaee14330044387b3aef01eb8ccb2bd 0xb0775048181c846513688882340885ab4611bfe25e1189c0b21f59fe17ba226c 0xa9bbebabbd25dc9cfa126929500ec42392998a9037d70639caed9dbac0cd5408 0xd55cbcfe0c4b174300428a927c2e463f6db33af235a7c06c0429de63d766b5a7 0x5713c780bdb931eee8aab2f7fe7efe4540acbbda3a57849479f7117b3b03ad15 0xf9723f97d3383415d397d3e4b8e36780956d5b49400ecd73bcf5ab233e53614e 0x77159b2963845d770eb1521867d8247e2b4a8f52a19d96fbfb3ca2b528697396 0x8d5e711463d002bb1cf485f574042c5840cbdd57dbc1fcd61efbf553dd8a95f1)) (tree-depth u13) (tx-index u627))
  none
  'SP673Z4BPB4R73359K9HE55F2X91V5BJTN5SXZ5T.runes-mineticket
))
(ok true)))

```
