---
title: "Trait bns-1743327530899-v1"
draft: true
---
```
(use-trait ft 'SP2AKWJYC7BNY18W1XXKPGP0YVEK63QJG4793Z2D4.sip-010-trait-ft-standard.sip-010-trait) (use-trait aft 'SP102V8P0F7JX67ARQ77WEA3D3CFB5XW39REDT0AM.trait-sip-010.sip-010-trait) (use-trait v2p 'SP1Y5YSTAHZ88XYK1VPDH24GY0HPX5J4JECTMY4A1.univ2-pool-trait_v1_0_0.univ2-pool-trait) (use-trait v2f 'SP1Y5YSTAHZ88XYK1VPDH24GY0HPX5J4JECTMY4A1.univ2-fees-trait_v1_0_0.univ2-fees-trait) (use-trait bp1 'SM1793C4R5PZ4NS4VQ4WMP7SKKYVH8JZEWSZ9HCCR.xyk-pool-trait-v-1-1.xyk-pool-trait) (use-trait bp2 'SM1793C4R5PZ4NS4VQ4WMP7SKKYVH8JZEWSZ9HCCR.xyk-pool-trait-v-1-2.xyk-pool-trait) (define-read-only (tft (fts (list 50 <ft>))) fts) (define-read-only (taft (fts (list 50 <aft>))) fts) (define-read-only (tv2p (fts (list 50 <v2p>))) fts) (define-read-only (tv2f (fts (list 50 <v2f>))) fts) (define-read-only (tbp1 (fts (list 50 <bp1>))) fts) (define-read-only (tbp2 (fts (list 50 <bp2>))) fts) (define-constant kft (tft (list 'SP1Y5YSTAHZ88XYK1VPDH24GY0HPX5J4JECTMY4A1.wstx 'SP1K8Y1JDM3MX9HNBS4MGYERRZSADVMZWASAPHPK3.simulation-coin-stxcity 'SM1793C4R5PZ4NS4VQ4WMP7SKKYVH8JZEWSZ9HCCR.token-stx-v-1-1 'SM1793C4R5PZ4NS4VQ4WMP7SKKYVH8JZEWSZ9HCCR.token-stx-v-1-2 'SP2QGQ3R0RH96SEGEV6YBK8QDPF7CQ0ATC2E7FH67.this-is-welsh-2-stxcity))) (define-constant kaft (taft (list 'SP102V8P0F7JX67ARQ77WEA3D3CFB5XW39REDT0AM.token-alex 'SP102V8P0F7JX67ARQ77WEA3D3CFB5XW39REDT0AM.token-wstx-v2 'SP1E0XBN9T4B10E9QMR7XMFJPMA19D77WY3KP2QKC.token-wsimulation))) (define-constant kv2p (tv2p (list 'SP1Y5YSTAHZ88XYK1VPDH24GY0HPX5J4JECTMY4A1.univ2-pool-v1_0_0-0003 'SP20X3DC5R091J8B6YPQT638J8NR1W83KN6TN5BJY.univ2-pool-v1_0_0-0024 'SP20X3DC5R091J8B6YPQT638J8NR1W83KN6TN5BJY.univ2-pool-v1_0_0-0127))) (define-constant kv2f (tv2f (list 'SP1Y5YSTAHZ88XYK1VPDH24GY0HPX5J4JECTMY4A1.univ2-fees-v1_0_0-0003 'SP20X3DC5R091J8B6YPQT638J8NR1W83KN6TN5BJY.univ2-fees-v1_0_0-0024 'SP20X3DC5R091J8B6YPQT638J8NR1W83KN6TN5BJY.univ2-fees-v1_0_0-0127))) (define-constant kbp1 (tbp1 (list 'SM1793C4R5PZ4NS4VQ4WMP7SKKYVH8JZEWSZ9HCCR.xyk-pool-stx-aeusdc-v-1-1))) (define-constant kbp2 (tbp2 (list 'SP2QGQ3R0RH96SEGEV6YBK8QDPF7CQ0ATC2E7FH67.xyk-pool-stx-welsh2-v-1-1)))(define-public (sw (a0 (buff 32)) (a1 (response uint uint))) (let ((v0 (unwrap-panic (element-at? a0 u0))) (v1 (try! a1)) (v2 (buff-to-uint-be (unwrap-panic (element-at? a0 u1)))) (v3 (buff-to-uint-be (unwrap-panic (element-at? a0 u2))))) (if (< v0 0x02) (let ((v4 (unwrap-panic (element-at? kaft v2))) (v5 (unwrap-panic (element-at? kaft v3))) (v6 (* (buff-to-uint-be (unwrap-panic (element-at? a0 u3))) u1000000)) (v7 (unwrap-panic (contract-call? v4 get-balance tx-sender)))) (if (< v0 0x01) (try! (contract-call? 'SP102V8P0F7JX67ARQ77WEA3D3CFB5XW39REDT0AM.amm-pool-v2-01 swap-x-for-y v4 v5 v6 v7 none)) (try! (contract-call? 'SP102V8P0F7JX67ARQ77WEA3D3CFB5XW39REDT0AM.amm-pool-v2-01 swap-y-for-x v5 v4 v6 v7 none))) (ok u0)) (if (< v0 0x04) (let ((v4 (unwrap-panic (element-at? kft v2))) (v5 (unwrap-panic (element-at? kft v3))) (v6 (buff-to-uint-be (unwrap-panic (element-at? a0 u3)))) (v7 (unwrap-panic (contract-call? v4 get-balance tx-sender)))) (if (< v0 0x03) (try! (contract-call? 'SP1Y5YSTAHZ88XYK1VPDH24GY0HPX5J4JECTMY4A1.univ2-router swap-exact-tokens-for-tokens v6 v4 v5 v4 v5 'SP1Y5YSTAHZ88XYK1VPDH24GY0HPX5J4JECTMY4A1.univ2-share-fee-to v7 u1)) (try! (contract-call? 'SP1Y5YSTAHZ88XYK1VPDH24GY0HPX5J4JECTMY4A1.univ2-router swap-exact-tokens-for-tokens v6 v5 v4 v4 v5 'SP1Y5YSTAHZ88XYK1VPDH24GY0HPX5J4JECTMY4A1.univ2-share-fee-to v7 u1))) (ok u0)) (if (< v0 0x06) (let ((v4 (unwrap-panic (element-at? kft v2))) (v5 (unwrap-panic (element-at? kft v3))) (v6 (buff-to-uint-be (unwrap-panic (element-at? a0 u3)))) (v7 (unwrap-panic (element-at? kv2p v6))) (v8 (unwrap-panic (element-at? kv2f v6))) (v9 (unwrap-panic (contract-call? v4 get-balance tx-sender)))) (try! (contract-call? v7 swap v4 v5 v8 v9 u1)) (ok u0)) (if (< v0 0x08) (let ((v4 (unwrap-panic (element-at? kft v2))) (v5 (unwrap-panic (element-at? kft v3))) (v6 (buff-to-uint-be (unwrap-panic (element-at? a0 u3)))) (v7 (unwrap-panic (contract-call? v4 get-balance tx-sender))) (v8 (unwrap-panic (element-at? kbp1 v6)))) (if (< v0 0x07) (try! (contract-call? 'SM1793C4R5PZ4NS4VQ4WMP7SKKYVH8JZEWSZ9HCCR.xyk-core-v-1-1 swap-x-for-y v8 v4 v5 v7 u1)) (try! (contract-call? 'SM1793C4R5PZ4NS4VQ4WMP7SKKYVH8JZEWSZ9HCCR.xyk-core-v-1-1 swap-y-for-x v8 v5 v4 v7 u1))) (ok u0)) (if (< v0 0x0a) (let ((v4 (unwrap-panic (element-at? kft v2))) (v5 (unwrap-panic (element-at? kft v3))) (v6 (buff-to-uint-be (unwrap-panic (element-at? a0 u3)))) (v7 (unwrap-panic (contract-call? v4 get-balance tx-sender))) (v8 (unwrap-panic (element-at? kbp2 v6)))) (if (< v0 0x09) (try! (contract-call? 'SM1793C4R5PZ4NS4VQ4WMP7SKKYVH8JZEWSZ9HCCR.xyk-core-v-1-2 swap-x-for-y v8 v4 v5 v7 u1)) (try! (contract-call? 'SM1793C4R5PZ4NS4VQ4WMP7SKKYVH8JZEWSZ9HCCR.xyk-core-v-1-2 swap-y-for-x v8 v5 v4 v7 u1))) (ok u0)) (err u9))))))))(define-public (sr (a0 (list 5 (buff 32))) (a1 uint)) (let ((v0 (unwrap-panic (element-at? a0 u0))) (v1 (unwrap-panic (element-at? v0 u0))) (v2 (buff-to-uint-be (unwrap-panic (element-at? v0 u1)))) (v3 tx-sender)) (if (> v1 0x01) (let ((v4 (unwrap-panic (element-at? kft v2)))) (try! (contract-call? v4 transfer a1 v3 (as-contract tx-sender) none))) (let ((v4 (unwrap-panic (element-at? kaft v2)))) (try! (contract-call? v4 transfer a1 v3 (as-contract tx-sender) none)))) (as-contract (begin (try! (fold sw a0 (ok a1))) (if (> v1 0x01) (let ((v4 (unwrap-panic (element-at? kft v2))) (v5 (unwrap-panic (contract-call? v4 get-balance tx-sender)))) (try! (contract-call? v4 transfer v5 tx-sender v3 none))) (let ((v4 (unwrap-panic (element-at? kaft v2))) (v5 (unwrap-panic (contract-call? v4 get-balance tx-sender)))) (try! (contract-call? v4 transfer v5 tx-sender v3 none)))))) (ok u0)))(define-public (ss (a0 (list 32 (list 5 (buff 32)))) (a1 (list 32 uint))) (ok (map sr a0 a1)))
```
