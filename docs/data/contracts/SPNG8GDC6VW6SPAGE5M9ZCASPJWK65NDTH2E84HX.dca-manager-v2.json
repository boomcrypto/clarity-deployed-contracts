{"address":"SPNG8GDC6VW6SPAGE5M9ZCASPJWK65NDTH2E84HX","name":"dca-manager-v2","block_height":166429,"burn_block_time_iso":"2024-09-18T10:31:22.000Z","contractInterface":{"functions":[{"name":"add-fee","access":"private","args":[{"name":"new-fee","type":"uint128"},{"name":"source","type":"principal"}],"outputs":{"type":"bool"}},{"name":"aggregate-amounts","access":"private","args":[{"name":"curr-resp","type":{"response":{"ok":{"tuple":[{"name":"amount-minus-fee","type":"uint128"},{"name":"fee","type":"uint128"},{"name":"key","type":{"optional":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"},{"name":"user","type":"principal"}]}}},{"name":"price","type":"uint128"}]},"error":"uint128"}}},{"name":"prev","type":{"tuple":[{"name":"fee","type":"uint128"},{"name":"price","type":"uint128"},{"name":"total-amount","type":"uint128"}]}}],"outputs":{"type":{"tuple":[{"name":"fee","type":"uint128"},{"name":"price","type":"uint128"},{"name":"total-amount","type":"uint128"}]}}},{"name":"calc-fees","access":"private","args":[{"name":"amount","type":"uint128"},{"name":"source","type":"principal"},{"name":"fee-fixed","type":"uint128"},{"name":"fee-percent","type":"uint128"}],"outputs":{"type":"uint128"}},{"name":"dca-user","access":"private","args":[{"name":"source-trait","type":"trait_reference"},{"name":"target-trait","type":"trait_reference"},{"name":"helper-trait","type":{"optional":"trait_reference"}},{"name":"key","type":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"},{"name":"user","type":"principal"}]}},{"name":"curr-timestamp","type":"uint128"}],"outputs":{"type":{"response":{"ok":{"tuple":[{"name":"amount-minus-fee","type":"uint128"},{"name":"fee","type":"uint128"},{"name":"key","type":{"optional":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"},{"name":"user","type":"principal"}]}}},{"name":"price","type":"uint128"}]},"error":"uint128"}}}},{"name":"dca-user-b","access":"private","args":[{"name":"token0","type":"trait_reference"},{"name":"token1","type":"trait_reference"},{"name":"token-in","type":"trait_reference"},{"name":"token-out","type":"trait_reference"},{"name":"key","type":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"},{"name":"user","type":"principal"}]}},{"name":"curr-timestamp","type":"uint128"}],"outputs":{"type":{"response":{"ok":{"tuple":[{"name":"amount-minus-fee","type":"uint128"},{"name":"fee","type":"uint128"},{"name":"key","type":{"optional":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"},{"name":"user","type":"principal"}]}}},{"name":"price","type":"uint128"}]},"error":"uint128"}}}},{"name":"div-down","access":"private","args":[{"name":"a","type":"uint128"},{"name":"b","type":"uint128"}],"outputs":{"type":"uint128"}},{"name":"div-down-6","access":"private","args":[{"name":"a","type":"uint128"},{"name":"b","type":"uint128"}],"outputs":{"type":"uint128"}},{"name":"get-amount-and-fee","access":"private","args":[{"name":"amount-to-trade","type":"uint128"},{"name":"source","type":"principal"},{"name":"fee-fixed","type":"uint128"},{"name":"fee-percent","type":"uint128"}],"outputs":{"type":{"tuple":[{"name":"amount-minus-fee","type":"uint128"},{"name":"fee","type":"uint128"}]}}},{"name":"get-price-hop","access":"private","args":[{"name":"source","type":"principal"},{"name":"target","type":"principal"},{"name":"source-factor","type":"uint128"},{"name":"helper-trait","type":"trait_reference"},{"name":"helper-factor","type":"uint128"},{"name":"is-source-numerator","type":"bool"}],"outputs":{"type":{"response":{"ok":"uint128","error":"uint128"}}}},{"name":"get-price-internal","access":"private","args":[{"name":"token-x","type":"principal"},{"name":"token-y","type":"principal"},{"name":"factor","type":"uint128"}],"outputs":{"type":{"response":{"ok":"uint128","error":"uint128"}}}},{"name":"mul-down","access":"private","args":[{"name":"a","type":"uint128"},{"name":"b","type":"uint128"}],"outputs":{"type":"uint128"}},{"name":"mul-down-6","access":"private","args":[{"name":"a","type":"uint128"},{"name":"b","type":"uint128"}],"outputs":{"type":"uint128"}},{"name":"process-swap","access":"private","args":[{"name":"source","type":"principal"},{"name":"target","type":"principal"},{"name":"helper-trait","type":{"optional":"trait_reference"}},{"name":"user","type":"principal"},{"name":"dca-amount","type":"uint128"},{"name":"min-price","type":"uint128"},{"name":"max-price","type":"uint128"},{"name":"source-amount-left","type":"uint128"},{"name":"interval","type":"uint128"},{"name":"strategy","type":"principal"},{"name":"curr-timestamp","type":"uint128"},{"name":"data","type":{"tuple":[{"name":"amount","type":"uint128"},{"name":"is-paused","type":"bool"},{"name":"last-updated-timestamp","type":"uint128"},{"name":"max-price","type":"uint128"},{"name":"min-price","type":"uint128"},{"name":"source-amount-left","type":"uint128"},{"name":"target-amount","type":"uint128"}]}}],"outputs":{"type":{"response":{"ok":{"tuple":[{"name":"amount-minus-fee","type":"uint128"},{"name":"fee","type":"uint128"},{"name":"key","type":{"optional":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"},{"name":"user","type":"principal"}]}}},{"name":"price","type":"uint128"}]},"error":"uint128"}}}},{"name":"process-swap-b","access":"private","args":[{"name":"token0","type":"principal"},{"name":"token-in","type":"principal"},{"name":"token-out","type":"principal"},{"name":"user","type":"principal"},{"name":"source-amount-left","type":"uint128"},{"name":"dca-amount","type":"uint128"},{"name":"min-price","type":"uint128"},{"name":"max-price","type":"uint128"},{"name":"interval","type":"uint128"},{"name":"strategy","type":"principal"},{"name":"curr-timestamp","type":"uint128"},{"name":"data","type":{"tuple":[{"name":"amount","type":"uint128"},{"name":"is-paused","type":"bool"},{"name":"last-updated-timestamp","type":"uint128"},{"name":"max-price","type":"uint128"},{"name":"min-price","type":"uint128"},{"name":"source-amount-left","type":"uint128"},{"name":"target-amount","type":"uint128"}]}}],"outputs":{"type":{"response":{"ok":{"tuple":[{"name":"amount-minus-fee","type":"uint128"},{"name":"fee","type":"uint128"},{"name":"key","type":{"optional":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"},{"name":"user","type":"principal"}]}}},{"name":"price","type":"uint128"}]},"error":"uint128"}}}},{"name":"set-new-target-amount","access":"private","args":[{"name":"total-source-amount","type":"uint128"},{"name":"total-target-amount","type":"uint128"},{"name":"user-dca-amount-resp","type":{"response":{"ok":{"tuple":[{"name":"amount-minus-fee","type":"uint128"},{"name":"fee","type":"uint128"},{"name":"key","type":{"optional":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"},{"name":"user","type":"principal"}]}}},{"name":"price","type":"uint128"}]},"error":"uint128"}}}],"outputs":{"type":"uint128"}},{"name":"set-new-user-key","access":"private","args":[{"name":"user","type":"principal"},{"name":"source","type":"principal"},{"name":"target","type":"principal"},{"name":"interval","type":"uint128"},{"name":"strategy","type":"principal"}],"outputs":{"type":{"response":{"ok":"bool","error":"uint128"}}}},{"name":"add-to-position","access":"public","args":[{"name":"source-trait","type":"trait_reference"},{"name":"target","type":"principal"},{"name":"interval","type":"uint128"},{"name":"strategy","type":"principal"},{"name":"amount","type":"uint128"}],"outputs":{"type":{"response":{"ok":"bool","error":"uint128"}}}},{"name":"create-dca","access":"public","args":[{"name":"source-trait","type":"trait_reference"},{"name":"target","type":"principal"},{"name":"interval","type":"uint128"},{"name":"total-amount","type":"uint128"},{"name":"dca-amount","type":"uint128"},{"name":"min-price","type":"uint128"},{"name":"max-price","type":"uint128"},{"name":"strategy","type":"principal"}],"outputs":{"type":{"response":{"ok":"bool","error":"uint128"}}}},{"name":"dca-users-a","access":"public","args":[{"name":"keys","type":{"list":{"type":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"},{"name":"user","type":"principal"}]},"length":50}}},{"name":"dca-strategy","type":"trait_reference"},{"name":"source-trait","type":"trait_reference"},{"name":"target-trait","type":"trait_reference"},{"name":"helper-trait","type":{"optional":"trait_reference"}}],"outputs":{"type":{"response":{"ok":{"list":{"type":"uint128","length":20}},"error":"uint128"}}}},{"name":"dca-users-b","access":"public","args":[{"name":"dca-strategy","type":"trait_reference"},{"name":"token0","type":"trait_reference"},{"name":"token1","type":"trait_reference"},{"name":"token-in","type":"trait_reference"},{"name":"token-out","type":"trait_reference"},{"name":"share-fee-to","type":"trait_reference"},{"name":"keys","type":{"list":{"type":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"},{"name":"user","type":"principal"}]},"length":50}}}],"outputs":{"type":{"response":{"ok":{"list":{"type":"uint128","length":50}},"error":"uint128"}}}},{"name":"reduce-position","access":"public","args":[{"name":"source-trait","type":"trait_reference"},{"name":"target","type":"principal"},{"name":"interval","type":"uint128"},{"name":"strategy","type":"principal"},{"name":"amount","type":"uint128"}],"outputs":{"type":{"response":{"ok":"bool","error":"uint128"}}}},{"name":"set-approved-strategy","access":"public","args":[{"name":"strat","type":"principal"},{"name":"status","type":"bool"}],"outputs":{"type":{"response":{"ok":"bool","error":"uint128"}}}},{"name":"set-sources-targets-config","access":"public","args":[{"name":"source","type":"principal"},{"name":"target","type":"principal"},{"name":"id","type":"uint128"},{"name":"fee-fixed","type":"uint128"},{"name":"fee-percent","type":"uint128"},{"name":"source-factor","type":"uint128"},{"name":"helper-factor","type":"uint128"},{"name":"is-source-numerator","type":"bool"},{"name":"min-dca-threshold","type":"uint128"},{"name":"max-dca-threshold","type":"uint128"},{"name":"max-slippage","type":"uint128"},{"name":"token0","type":"principal"},{"name":"token1","type":"principal"},{"name":"token-in","type":"principal"},{"name":"token-out","type":"principal"}],"outputs":{"type":{"response":{"ok":"bool","error":"uint128"}}}},{"name":"set-treasury","access":"public","args":[{"name":"address","type":"principal"}],"outputs":{"type":{"response":{"ok":"bool","error":"uint128"}}}},{"name":"set-user-dca-data","access":"public","args":[{"name":"source","type":"principal"},{"name":"target","type":"principal"},{"name":"interval","type":"uint128"},{"name":"strategy","type":"principal"},{"name":"is-paused","type":"bool"},{"name":"amount","type":"uint128"}],"outputs":{"type":{"response":{"ok":"bool","error":"uint128"}}}},{"name":"transfer-fee-to-treasury","access":"public","args":[{"name":"source-trait","type":"trait_reference"}],"outputs":{"type":{"response":{"ok":"bool","error":"uint128"}}}},{"name":"withdraw","access":"public","args":[{"name":"source","type":"principal"},{"name":"target-trait","type":"trait_reference"},{"name":"interval","type":"uint128"},{"name":"strategy","type":"principal"},{"name":"amount","type":"uint128"}],"outputs":{"type":{"response":{"ok":"bool","error":"uint128"}}}},{"name":"get-dca-data","access":"read_only","args":[{"name":"user","type":"principal"},{"name":"source","type":"principal"},{"name":"target","type":"principal"},{"name":"interval","type":"uint128"},{"name":"strategy","type":"principal"}],"outputs":{"type":{"optional":{"tuple":[{"name":"amount","type":"uint128"},{"name":"is-paused","type":"bool"},{"name":"last-updated-timestamp","type":"uint128"},{"name":"max-price","type":"uint128"},{"name":"min-price","type":"uint128"},{"name":"source-amount-left","type":"uint128"},{"name":"target-amount","type":"uint128"}]}}}},{"name":"get-fee","access":"read_only","args":[{"name":"source","type":"principal"}],"outputs":{"type":"uint128"}},{"name":"get-interval-seconds","access":"read_only","args":[{"name":"interval","type":"uint128"}],"outputs":{"type":{"optional":{"tuple":[{"name":"seconds","type":"uint128"}]}}}},{"name":"get-price","access":"read_only","args":[{"name":"source","type":"principal"},{"name":"target","type":"principal"},{"name":"source-factor","type":"uint128"},{"name":"is-source-numerator","type":"bool"},{"name":"helper-trait-opt","type":{"optional":"trait_reference"}},{"name":"helper-factor","type":{"optional":"uint128"}}],"outputs":{"type":{"response":{"ok":"uint128","error":"uint128"}}}},{"name":"get-price-b","access":"read_only","args":[{"name":"id","type":"uint128"},{"name":"token0","type":"principal"},{"name":"token-in","type":"principal"},{"name":"amt-source","type":"uint128"},{"name":"is-source-numerator","type":"bool"}],"outputs":{"type":{"response":{"ok":"uint128","error":"uint128"}}}},{"name":"get-sources-targets-config","access":"read_only","args":[{"name":"source","type":"principal"},{"name":"target","type":"principal"}],"outputs":{"type":{"response":{"ok":{"optional":{"tuple":[{"name":"fee-fixed","type":"uint128"},{"name":"fee-percent","type":"uint128"},{"name":"helper-factor","type":"uint128"},{"name":"id","type":"uint128"},{"name":"is-source-numerator","type":"bool"},{"name":"max-dca-threshold","type":"uint128"},{"name":"max-slippage","type":"uint128"},{"name":"min-dca-threshold","type":"uint128"},{"name":"source-factor","type":"uint128"},{"name":"token-in","type":"principal"},{"name":"token-out","type":"principal"},{"name":"token0","type":"principal"},{"name":"token1","type":"principal"}]}},"error":"none"}}}},{"name":"get-user-keys","access":"read_only","args":[{"name":"user","type":"principal"}],"outputs":{"type":{"optional":{"list":{"type":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"}]},"length":1000}}}}},{"name":"is-approved","access":"read_only","args":[],"outputs":{"type":"bool"}},{"name":"is-approved-startegy","access":"read_only","args":[{"name":"strat","type":"principal"}],"outputs":{"type":{"optional":"bool"}}}],"variables":[{"name":"ERR-CONFIG-NOT-SET","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ERR-DCA-ALREADY-EXISTS","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ERR-FETCHING-PRICE","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ERR-INVALID-AMOUNT","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ERR-INVALID-INTERVAL","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ERR-INVALID-KEY","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ERR-INVALID-PRICE","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ERR-INVALID-PRINCIPAL","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ERR-INVALID-STRATEGY","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ERR-MAX-POSITIONS-EXCEEDED","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ERR-NOT-AUTHORIZED","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ERR-PAUSED","type":{"response":{"ok":"none","error":"uint128"}},"access":"constant"},{"name":"ONE_6","type":"uint128","access":"constant"},{"name":"ONE_8","type":"uint128","access":"constant"},{"name":"ONE_DAY","type":"uint128","access":"constant"},{"name":"ONE_WEEK","type":"uint128","access":"constant"},{"name":"TWO_HOURS","type":"uint128","access":"constant"},{"name":"treasury","type":"principal","access":"variable"}],"maps":[{"name":"approved-startegies","key":"principal","value":"bool"},{"name":"dca-data","key":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"},{"name":"user","type":"principal"}]},"value":{"tuple":[{"name":"amount","type":"uint128"},{"name":"is-paused","type":"bool"},{"name":"last-updated-timestamp","type":"uint128"},{"name":"max-price","type":"uint128"},{"name":"min-price","type":"uint128"},{"name":"source-amount-left","type":"uint128"},{"name":"target-amount","type":"uint128"}]}},{"name":"fee-map","key":{"tuple":[{"name":"source","type":"principal"}]},"value":{"tuple":[{"name":"fee","type":"uint128"}]}},{"name":"interval-id-to-seconds","key":{"tuple":[{"name":"interval","type":"uint128"}]},"value":{"tuple":[{"name":"seconds","type":"uint128"}]}},{"name":"sources-targets-config","key":{"tuple":[{"name":"source","type":"principal"},{"name":"target","type":"principal"}]},"value":{"tuple":[{"name":"fee-fixed","type":"uint128"},{"name":"fee-percent","type":"uint128"},{"name":"helper-factor","type":"uint128"},{"name":"id","type":"uint128"},{"name":"is-source-numerator","type":"bool"},{"name":"max-dca-threshold","type":"uint128"},{"name":"max-slippage","type":"uint128"},{"name":"min-dca-threshold","type":"uint128"},{"name":"source-factor","type":"uint128"},{"name":"token-in","type":"principal"},{"name":"token-out","type":"principal"},{"name":"token0","type":"principal"},{"name":"token1","type":"principal"}]}},{"name":"user-keys","key":{"tuple":[{"name":"user","type":"principal"}]},"value":{"list":{"type":{"tuple":[{"name":"interval","type":"uint128"},{"name":"source","type":"principal"},{"name":"strategy","type":"principal"},{"name":"target","type":"principal"}]},"length":1000}}}],"fungible_tokens":[],"non_fungible_tokens":[]},"sip9":false,"sip10":false,"commission":false,"operable":false}