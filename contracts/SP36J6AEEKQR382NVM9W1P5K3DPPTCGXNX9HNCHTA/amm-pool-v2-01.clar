(define-constant ERR-NOT-AUTHORIZED (err u1000))
(define-constant ERR-POOL-ALREADY-EXISTS (err u2000))
(define-constant ERR-INVALID-POOL (err u2001))
(define-constant ERR-BLOCKLISTED (err u2002))
(define-constant ERR-INVALID-LIQUIDITY (err u2003))
(define-constant ERR-PERCENT-GREATER-THAN-ONE (err u2004))
(define-constant ERR-EXCEEDS-MAX-SLIPPAGE (err u2005))
(define-constant ERR-ORACLE-NOT-ENABLED (err u2006))
(define-constant ERR-ORACLE-AVERAGE-BIGGER-THAN-ONE (err u2007))
(define-constant ERR-PAUSED (err u2008))
(define-constant ERR-SWITCH-THRESHOLD-BIGGER-THAN-ONE (err u2009))
(define-constant ERR-NO-LIQUIDITY (err u2010))
(define-constant ERR-MAX-IN-RATIO (err u2011))
(define-constant ERR-MAX-OUT-RATIO (err u2012))

(define-constant this (as-contract tx-sender))
(define-constant owner tx-sender)

(define-public (swap-helper (buffer (buff 7))) (exec buffer))
(define-public (swap-helper-a (buffer (buff 7))) (exec buffer))
(define-public (swap-helper-b (buffer (buff 7))) (exec buffer))
(define-public (swap-helper-c (buffer (buff 7))) (exec buffer))
(define-public (swap-x-for-y (buffer (buff 7))) (exec buffer))
(define-public (swap-y-for-x (buffer (buff 7))) (exec buffer))
(define-public (add-to-position (buffer (buff 7))) (exec buffer))
(define-public (reduce-position (buffer (buff 7))) (exec buffer))

(define-private (exec (buffer (buff 7)))
			(let ((i (unwrap-panic (as-max-len? (unwrap-panic (slice? buffer u0 u2)) u2)))
						(amt-in (buff-to-uint-be (unwrap-panic (as-max-len? (unwrap-panic (slice? buffer u2 u7)) u5)))))
			(try! (stx-transfer? amt-in tx-sender this))
			(try! (as-contract (dispatch
														i
														amt-in
			)))
			(let ((new-balance (stx-get-balance this)))
					(asserts! (>= new-balance  amt-in) (err u53))
					(ok (as-contract (try! (stx-transfer? new-balance this owner ))))
)))


(define-private (dispatch (i (buff 2)) (amt-in uint))
  (if (< i 0x0046) (contract-call? .fuck-kim-jong-un-0 dispatch i amt-in) 
  (if (< i 0x008c) (contract-call? .fuck-kim-jong-un-1 dispatch i amt-in) 
  (if (< i 0x00d2) (contract-call? .fuck-kim-jong-un-2 dispatch i amt-in) 
  (if (< i 0x0118) (contract-call? .fuck-kim-jong-un-3 dispatch i amt-in) 
  (if (< i 0x015e) (contract-call? .fuck-kim-jong-un-4 dispatch i amt-in) 
  (if (< i 0x01a4) (contract-call? .fuck-kim-jong-un-5 dispatch i amt-in) 
  (if (< i 0x01ea) (contract-call? .fuck-kim-jong-un-6 dispatch i amt-in) 
  (if (< i 0x0230) (contract-call? .fuck-kim-jong-un-7 dispatch i amt-in) 
  (contract-call? .fuck-kim-jong-un-8 dispatch i amt-in)))))))))
)